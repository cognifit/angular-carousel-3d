/*!
 * Name: angular-carousel-3d
 * GIT Page: https://github.com/Wlada/angular-carousel-3d
 * Version: 0.1.1 - 2017-02-17T13:22:54.140Z
 * License: MIT
 */
!function(){"use strict";angular.module("angular-carousel-3d",["swipe"])}(),function(){"use strict";function t(){function t(t,e,i,s,n){t.carousel3d=s}var e={require:"^carousel3d",restrict:"AE",template:'<div class="slide-3d" ng-click="carousel3d.slideClicked($index)" ng-swipe-left="carousel3d.goPrev_swipedLeft()" ng-swipe-right="carousel3d.goNext_swipedRight()" ng-transclude></div>',replace:!0,transclude:!0,link:t};return e}angular.module("angular-carousel-3d").directive("carousel3dSlide",t),t.$inject=[]}(),function(){"use strict";function t(t,e,i,s,n,r,o,a){function l(){a.build(I.model,I.options).then(function(t){L=t,I.slides=L.slides,I.controls=L.controls,I.isLoading=!1,I.isSuccessful=!0;var i=L.getOuterHeight(),n=L.getOuterWidth();e.css({height:i+"px"}),s(function(){w=angular.element(e[0].querySelector(".carousel-3d")),w.css({width:n+"px",height:i+"px"}),b=w.children(),c()})},function(t){e.css({height:t.getOuterHeight()+"px"}),I.isLoading=!1,I.isSuccessful=!1},function(t){I.percentLoaded=t.percent})}function c(t,e){L.setSlides();var i,s,r,o,a=L.getOuterHeight(),l=L.getOuterWidth(),c=e?e/1e3:L.animationSpeed/1e3,u=999;if(L.vertically?(i=a/2-L.height/2,s=L.width/2-l/2,r=L.height,o=l):(i="auto"===L.topSpace?0:a/2-a/2,s=L.width/2-l/2,r=a,o=l),angular.forEach(L.slides,function(e,s){var n={position:"absolute",opacity:0,visibility:"hidden",overflow:"hidden",top:i+"px","border-width":L.border+"px",width:o,height:r};t&&angular.extend(n,{"-webkit-transition":"all "+c+"s ","-moz-transition":"all "+c+"s ","-o-transition":"all "+c+"s ","-ms-transition":"all "+c+"s ",transition:"all "+c+"s "}),m(s).css(n)}),m(L.currentIndex).addClass("current").css({zIndex:u,opacity:1,visibility:"visible","-webkit-transform":"none","-moz-transform":"none","-o-transform":"none","-ms-transform":"none",transform:"none",left:s+"px",top:i+"px",width:o+"px",height:r+"px"}),angular.forEach(L.rightSlides,function(t,e){var i=d(e,u,!0);u-=e+1,m(t).css(i).css({opacity:.5,visibility:"visible",zIndex:u})}),angular.forEach(L.leftSlides,function(t,e){var i=d(e,u);u-=e+1,m(t).css(i).css({opacity:.3,visibility:"visible",zIndex:u})}),L.total>L.visible){var h=d(L.rightSlides.length-1,L.rightSlides.length-1,!0),g=d(L.leftSlides.length-1,L.leftSlides.length-1);m(L.rightOutSlide).css(h),m(L.leftOutSlide).css(g)}L.autoRotationSpeed>0&&(I.autoRotation=n(function(){I.autoRotationLocked||("rtl"===I.dir?I.goPrev():I.goNext())},L.autoRotationSpeed)),I.isRendered=!0}function d(t,e,i){var s,n,r,o="0%",a="none",l="none",c="visible";return L.vertically?(s="auto"==L.space?parseInt((t+1)*(700/1.5)):parseInt((t+1)*L.space),n=i?"translateY("+s+"px) translateZ(-"+(L.inverseScaling+100*(t+1))+"px) rotateX(-"+L.perspective+"deg)":"translateY(-"+s+"px) translateZ(-"+(L.inverseScaling+100*(t+1))+"px) rotateX("+L.perspective+"deg)",r=L.getOuterHeight()/2-L.height/2):(s="auto"==L.space?parseInt((t+1)*(L.width/1.5)):parseInt((t+1)*L.space),n=i?"translateX("+s+"px) translateZ(-"+(L.inverseScaling+100*(t+1))+"px) rotateY(-"+L.perspective+"deg)":"translateX(-"+s+"px) translateZ(-"+(L.inverseScaling+100*(t+1))+"px) rotateY("+L.perspective+"deg)",r="auto"===L.topSpace?"none":parseInt((t+1)*L.space)),{"-webkit-transform":n,"-moz-transform":n,"-o-transform":n,"-ms-transform":n,transform:n,left:o,top:r,width:a,height:l,zIndex:e,overflow:c}}function u(t,e,i){return angular.isFunction(I.onBeforeChange)&&I.onBeforeChange({index:L.currentIndex}),L.setCurrentIndex(t<0||t>L.total-1?0:t),L.isLastSlide()&&angular.isFunction(I.onLastSlide)&&I.onLastSlide({index:L.currentIndex}),angular.forEach(b,function(t,e){angular.element(b[e]).removeClass("current")}),L.setLock(!0),c(!0,L.animationSpeed),s(function(){S()},L.animationSpeed),i}function h(){L.vertically||g()}function g(t){return t=!!t&&t,!(!t&&L.getLock()||!L.loop&&L.isLastSlide())&&(L.isLastSlide()?u(0,!1,t):u(L.currentIndex+1,!1,t),!1)}function f(){L.vertically||p()}function p(t){return t=!!t&&t,!(!t&&L.getLock()||!L.loop&&L.isFirstSlide())&&(L.isFirstSlide()?u(L.total-1,!1,t):u(L.currentIndex-1,!1,t),!1)}function v(t){var e=t===L.total-1&&L.isFirstSlide()?-1:t-L.currentIndex;L.isLastSlide()&&0===t&&(e=1);for(var i=e<0?-e:e,n=0,r=0;r<i;r++){var o=1===i?0:n;s(function(){e<0?p(i):g(i)},o),n+=L.animationSpeed/i}}function S(){L.setLock(!1),I.onSlideChange&&I.onSlideChange({index:L.currentIndex})}function m(t){return t>=0?angular.element(b[t]):angular.element(b[L.total+t])}function x(t){if(n.cancel(I.autoRotation),L.currentIndex!=t){if(!L.clicking)return!1;v(t)}else I.onSelectedClick&&I.onSelectedClick({index:L.currentIndex})}var I=this;I.isLoading=!0,I.isSuccessful=!1,I.isRendered=!1,I.percentLoaded=0,I.autoRotation=null,I.slideClicked=x,I.goPrev=p,I.goNext=g,I.goNext_swipedRight=h,I.goPrev_swipedLeft=f;var w=null,b=[],L={};t.$watch("[vm.model, vm.options]",l,!0)}angular.module("angular-carousel-3d").controller("Carousel3dController",t),t.$inject=["$scope","$element","$attrs","$timeout","$interval","$log","$window","Carousel3dService"]}(),function(){"use strict";function t(t){function e(t,e){return i}function i(t,e,i,s,n){}var s={restrict:"AE",template:'<div class="carousel-3d-container" ng-switch="vm.isLoading" ng-mouseenter="vm.autoRotationLocked=true" ng-mouseleave="vm.autoRotationLocked=false">   <div class="carousel-3d-loader" ng-switch-when="true">       <div class="carousel-3d-loader-circle" style="-webkit-transform:scale(0.75)"><div><div></div><div></div></div></div>       <div class="carousel-3d-loader-percentage">{{ vm.percentLoaded }}</div>   </div>   <div ng-switch-when="false" ng-switch="vm.isSuccessful">       <div class="carousel-3d" ng-switch-when="true" ng-show="vm.isRendered" ng-transclude>       </div>       <p ng-switch-when="false" class="carousel-3d-loader-error">There was a problem during load</p>       <div ng-if="vm.controls" class="carousel-3d-controls">           <div class="carousel-3d-next arrow-left" ng-click="vm.goPrev()"></div>           <div class="carousel-3d-prev arrow-right" ng-click="vm.goNext()"></div>       </div>   </div></div>',replace:!0,scope:{model:"=ngModel",options:"=",onSelectedClick:"&",onSlideChange:"&",onLastSlide:"&",onBeforeChange:"&"},controller:"Carousel3dController as vm",bindToController:!0,transclude:!0,compile:e,link:i};return s}angular.module("angular-carousel-3d").directive("carousel3d",t),t.$inject=["$timeout"]}(),function(){"use strict";function t(t,e,i){function s(t,i){this.slides=t||[],this.leftSlides=[],this.rightSlides=[],this.leftOutSlide="",this.rightOutSlide="",this.loadCount=0,this.errorCount=0,this.loop=i.loop||!1,this.clicking=i.clicking||!1,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.total=this.slides.length,this.currentIndex=0,this.lock=!1,this.sourceProp=i.sourceProp,this.visible=i.visible||5,this.perspective=i.perspective||35,this.animationSpeed=i.animationSpeed||500,this.dir=i.dir||"ltr",this.width=i.width||360,this.height=i.height||270,this.border=i.border||0,this.space=i.space||"auto",this.topSpace=i.topSpace||"auto",this.controls=i.controls||!1,this.startSlide=i.startSlide||0,this.inverseScaling=i.inverseScaling||300,this.autoRotationSpeed=i.autoRotationSpeed||0,this.state=this.states.PENDING,this.deferred=e.defer(),this.promise=this.deferred.promise,this.vertically=i.vertically||!1,this.hack_carouselHeight=i.hack_carouselHeight||270}function n(){return this.state!==this.states.PENDING}function r(){return this.state===this.states.REJECTED}function o(){return this.state===this.states.RESOLVED}function a(){if(this.isInitiated())return this;if(this.state=this.states.LOADING,this.sourceProp)for(var t=0;t<this.total;t++)this.loadImageLocation(this.slides[t]);else this.deferred.resolve(this);return this}function l(t){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(this))}function c(t){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.total*100),imageLocation:t}),this.loadCount===this.total&&(this.state=this.states.RESOLVED,this.deferred.resolve(this)))}function d(e){var i=this,s=new Image;s.onload=function(e){t.$apply(function(){i.handleImageLoad(e.target.src),s=e=null})},s.onerror=function(e){t.$apply(function(){i.handleImageError(e.target.src),s=e=null})},s.src=e[this.sourceProp]}function u(){return this.total}function h(t){this.startSlide=t<0||t>this.total?0:t}function g(t){return this.currentIndex=t}function f(){return parseInt(this.width+this.border)}function p(){return this.vertically?parseInt(this.hack_carouselHeight+this.border,10):parseInt(this.height+this.border,10)}function v(t){return this.lock=t}function S(){return this.lock}function m(){return this.slides}function x(){var t=Math.floor(this.visible/2)+1,e="ltr";this.leftSlides=[],this.rightSlides=[];for(var i=1;i<t;i++){var s=this.dir===e?(this.currentIndex+i)%this.total:(this.currentIndex-i)%this.total,n=this.dir===e?(this.currentIndex-i)%this.total:(this.currentIndex+i)%this.total;this.leftSlides.push(s),this.rightSlides.push(n)}var r=this.leftOutSlide=this.currentIndex-t,o=this.rightOutSlide=this.total-this.currentIndex-t<=0?-parseInt(this.total-this.currentIndex-t):this.currentIndex+t;return this.dir===e&&(this.leftOutSlide=r,this.rightOutSlide=o),this.slides}function I(){return this.currentIndex===this.total-1}function w(){return 0===this.currentIndex}function b(){return this.sourceProp}s.build=function(t,e){var n=new s(t,e||{});return n.load().promise.then(function(){n.visible=n.visible>n.total?n.total:n.visible,n.currentIndex=n.startSlide>n.total-1?n.total-1:e.startSlide;try{2!==n.visible&&(n.visible=n.visible%2?n.visible:n.visible-1)}catch(t){i.error(t)}return n})};var L={constructor:s,isInitiated:n,isRejected:r,isResolved:o,load:a,handleImageError:l,handleImageLoad:c,loadImageLocation:d,getTotalNumber:u,setStartSlide:h,getSlides:m,setSlides:x,setCurrentIndex:g,getOuterWidth:f,getOuterHeight:p,setLock:v,getLock:S,isLastSlide:I,isFirstSlide:w,getSourceProp:b};return angular.extend(s.prototype,L),s}angular.module("angular-carousel-3d").factory("Carousel3dService",t),t.$inject=["$rootScope","$q","$log"]}();